<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Tree</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f4f4f9;
        }
        .family-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .generation {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }
        .person {
            margin: 0 15px;
            text-align: center;
            position: relative;
        }
        .line {
            border-top: 2px solid #333;
            width: 40px;
            margin: 0 auto;
        }
        .connection {
            position: absolute;
            border: 2px solid #333;
            height: 20px;
            width: 2px;
            background-color: #333;
        }
        .horizontal {
            height: 2px;
            width: 50px;
            border: none;
        }
        #controls {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="controls">
        <input type="text" id="name" placeholder="Name" />
        <input type="number" id="generation" placeholder="Generation" min="1" />
        <input type="text" id="parents" placeholder="Parents (comma-separated)" />
        <button onclick="addMember()">Add Member</button>
    </div>

    <div class="family-tree" id="familyTree">
        <!-- Family tree will be dynamically generated here -->
    </div>

    <script>
        let familyData = [];

        function addMember() {
            const name = document.getElementById('name').value.trim();
            const generation = parseInt(document.getElementById('generation').value);
            const parents = document.getElementById('parents').value.trim().split(',').map(p => p.trim());

            if (name && generation) {
                familyData.push({ name, generation, parents: parents.filter(p => p) });
                renderFamilyTree();
            }
        }

        function renderFamilyTree() {
            const treeContainer = document.getElementById('familyTree');
            treeContainer.innerHTML = '';

            const generations = {};

            // Group members by generation
            familyData.forEach(person => {
                if (!generations[person.generation]) {
                    generations[person.generation] = [];
                }
                generations[person.generation].push(person);
            });

            Object.keys(generations).forEach(generation => {
                const genDiv = document.createElement('div');
                genDiv.className = 'generation';

                generations[generation].forEach(member => {
                    const personDiv = document.createElement('div');
                    personDiv.className = 'person';
                    personDiv.innerHTML = `<p>${member.name}</p>`;
                    genDiv.appendChild(personDiv);
                });

                treeContainer.appendChild(genDiv);
            });

            // Add connections
            familyData.forEach(person => {
                if (person.parents) {
                    person.parents.forEach(parentName => {
                        const parentElement = Array.from(document.querySelectorAll('.person')).find(el => el.textContent.trim() === parentName);
                        const childElement = Array.from(document.querySelectorAll('.person')).find(el => el.textContent.trim() === person.name);

                        if (parentElement && childElement) {
                            const parentRect = parentElement.getBoundingClientRect();
                            const childRect = childElement.getBoundingClientRect();

                            const connectionLine = document.createElement('div');
                            connectionLine.style.position = 'absolute';
                            connectionLine.style.height = `${childRect.top - parentRect.bottom}px`;
                            connectionLine.style.width = '2px';
                            connectionLine.style.backgroundColor = '#333';
                            connectionLine.style.left = `${(parentRect.left + parentRect.right) / 2}px`;
                            connectionLine.style.top = `${parentRect.bottom}px`;

                            document.body.appendChild(connectionLine);
                        }
                    });
                }
            });
        }
    </script>
</body>
</html>
